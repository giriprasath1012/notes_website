{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\GIRI PRASATH.V\\\\Desktop\\\\fullstack-notesapp\\\\frontend\\\\src\\\\components\\\\Login.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport { AuthContext } from '../context/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  // State Variables\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(true);\n  const [hint, setHint] = useState(''); // Initialize history\n\n  const history = useHistory();\n  const {\n    isLoggedIn,\n    setIsLoggedIn\n  } = useContext(AuthContext); // TODO: CHECK IF USER IS LOGGED IN ALREADY\n\n  useEffect(() => {\n    if (isLoggedIn) history.push('/');\n  }, [isLoggedIn]); // Functions\n\n  const handleSubmit = () => {\n    const url = `${process.env.REACT_APP_BACKEND_BASE_URL}/users/login`;\n    const body = {\n      emailId: email,\n      password\n    };\n    const options = {\n      withCredentials: true,\n      Credential: 'include',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    axios.post(url, body, options).then(res => {\n      setIsLoading(true);\n\n      if (res.data.success) {\n        console.log(res.data);\n        setHint(res.data.message);\n        setIsLoggedIn(true);\n        history.push('/');\n      } else {\n        setHint('Incorrect email or password. Please check your credentials.');\n      }\n    }).then(() => {\n      setIsLoading(false);\n    }).catch(err => {\n      setIsLoading(false);\n      setIsLoggedIn(false);\n\n      if (!err.response.data.success) {\n        setHint('Please input valid credentials');\n      }\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"h-screen bg-bg-black text-font-main font-Mulish sm:flex justify-center items-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 flex flex-col justify-around h-full sm:w-10/12 md:w-7/12 lg:w-5/12 \",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-4xl font-bold \",\n          children: \"Let's sign you in.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"capitalize text-2xl mt-3 text-gray-300\",\n          children: \"Welcome back. We missed you.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"w-11/12 text-center mt-3 text-lg text-font-secondary rounded\",\n            children: hint\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            className: \"outline-none w-full p-4 my-3 rounded-lg border border-gray-700 bg-bg-black text-lg\",\n            placeholder: \"Email\",\n            autoComplete: \"off\",\n            value: email,\n            onChange: e => setEmail(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"outline-none w-full p-4 my-3 rounded-lg border border-gray-700 bg-bg-black text-lg\",\n            placeholder: \"Password\",\n            autoComplete: \"off\",\n            value: password,\n            onChange: e => setPassword(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"w-full p-4 my-3 rounded-lg text-black font-bold text-xl bg-font-main\",\n          onClick: handleSubmit,\n          children: \"SUBMIT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center text-gray-400\",\n          children: [\"Don't have an account?\\xA0\", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            className: \"underline\",\n            children: \"Register a new user\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Login, \"/+i9RMWR3wWqzSzFqP3e4Ycw58I=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/GIRI PRASATH.V/Desktop/fullstack-notesapp/frontend/src/components/Login.js"],"names":["useState","useContext","useEffect","Link","useHistory","axios","AuthContext","Login","email","setEmail","password","setPassword","isLoading","setIsLoading","hint","setHint","history","isLoggedIn","setIsLoggedIn","push","handleSubmit","url","process","env","REACT_APP_BACKEND_BASE_URL","body","emailId","options","withCredentials","Credential","headers","post","then","res","data","success","console","log","message","catch","err","response","e","target","value"],"mappings":"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","sourcesContent":["import { useState, useContext, useEffect } from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nimport { AuthContext } from '../context/AuthContext';\r\n\r\nconst Login = () => {\r\n\t// State Variables\r\n\tconst [email, setEmail] = useState('');\r\n\tconst [password, setPassword] = useState('');\r\n\tconst [isLoading, setIsLoading] = useState(true);\r\n\tconst [hint, setHint] = useState('');\r\n\r\n\t// Initialize history\r\n\tconst history = useHistory();\r\n\r\n\tconst { isLoggedIn, setIsLoggedIn } = useContext(AuthContext);\r\n\t\r\n\t// TODO: CHECK IF USER IS LOGGED IN ALREADY\r\n\tuseEffect(() => {\r\n\t\tif (isLoggedIn) history.push('/');\r\n\t}, [isLoggedIn]);\r\n\r\n\t// Functions\r\n\tconst handleSubmit = () => {\r\n\t\tconst url = `${process.env.REACT_APP_BACKEND_BASE_URL}/users/login`;\r\n\t\tconst body = { emailId: email, password };\r\n\t\tconst options = {\r\n\t\t\twithCredentials: true,\r\n\t\t\tCredential: 'include',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\t\r\n\t\taxios\r\n\t\t\t.post(url, body, options)\r\n\t\t\t.then((res) => {\r\n\t\t\t\tsetIsLoading(true);\r\n\t\r\n\t\t\t\tif (res.data.success) {\r\n\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\tsetHint(res.data.message);\r\n\t\t\t\t\tsetIsLoggedIn(true);\r\n\t\t\t\t\thistory.push('/');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetHint('Incorrect email or password. Please check your credentials.');\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.then(() => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\tsetIsLoading(false);\r\n\t\t\t\tsetIsLoggedIn(false);\r\n\t\t\t\tif (!err.response.data.success) {\r\n\t\t\t\t\tsetHint('Please input valid credentials');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t};\r\n\t\r\n\treturn (\r\n\t\t<div className=\"h-screen bg-bg-black text-font-main font-Mulish sm:flex justify-center items-center\">\r\n\t\t\t<div className=\"p-4 flex flex-col justify-around h-full sm:w-10/12 md:w-7/12 lg:w-5/12 \">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<h1 className=\"text-4xl font-bold \">Let's sign you in.</h1>\r\n\t\t\t\t\t<p className=\"capitalize text-2xl mt-3 text-gray-300\">\r\n\t\t\t\t\t\tWelcome back. We missed you.\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"\">\r\n\t\t\t\t\t\t<p className=\"w-11/12 text-center mt-3 text-lg text-font-secondary rounded\">\r\n\t\t\t\t\t\t\t{hint}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"email\"\r\n\t\t\t\t\t\t\tclassName=\"outline-none w-full p-4 my-3 rounded-lg border border-gray-700 bg-bg-black text-lg\"\r\n\t\t\t\t\t\t\tplaceholder=\"Email\"\r\n\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\tvalue={email}\r\n\t\t\t\t\t\t\tonChange={(e) => setEmail(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"password\"\r\n\t\t\t\t\t\t\tclassName=\"outline-none w-full p-4 my-3 rounded-lg border border-gray-700 bg-bg-black text-lg\"\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\t\t\tvalue={password}\r\n\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"w-full p-4 my-3 rounded-lg text-black font-bold text-xl bg-font-main\"\r\n\t\t\t\t\t\tonClick={handleSubmit}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tSUBMIT\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<p className=\"text-center text-gray-400\">\r\n\t\t\t\t\t\tDon't have an account?&nbsp;\r\n\t\t\t\t\t\t<Link to=\"/register\" className=\"underline\">\r\n\t\t\t\t\t\t\tRegister a new user\r\n\t\t\t\t\t\t</Link>\r\n\t\t\t\t\t</p>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}