{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\GIRI PRASATH.V\\\\Desktop\\\\fullstack-notesapp\\\\frontend\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from 'react';\nimport { BrowserRouter, BrowserRouter as Router, Route, Switch, useHistory } from 'react-router-dom';\nimport { AuthContext } from './context/AuthContext';\nimport Create from './components/Create';\nimport Dashboard from './components/Dashboard';\nimport FullNote from './components/FullNote';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [username, setUsername] = useState('');\n  const [isLoggedIn, setIsLoggedIn] = useState(false);\n  const history = useHistory();\n  useEffect(() => {\n    const URL = `${process.env.REACT_APP_BACKEND_BASE_URL}/users/is-logged`;\n    const options = {\n      withCredentials: true,\n      Credential: 'include',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    console.log('in APP');\n    axios.get(URL, options).then(res => {\n      // console.log(res.data.username);\n      setUsername(res.data.username);\n      setIsLoggedIn(true);\n    }).catch(error => {\n      console.log(error.response.data);\n      if (window.location.href.endsWith('/register')) return;else if (!window.location.href.endsWith('/login')) window.location.href = '/login';\n      setIsLoggedIn(false);\n    });\n  }, []);\n  console.log(username, isLoggedIn);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      username,\n      isLoggedIn,\n      setIsLoggedIn\n    },\n    children: /*#__PURE__*/_jsxDEV(Router, {\n      children: /*#__PURE__*/_jsxDEV(Switch, {\n        children: [/*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/login\",\n          children: /*#__PURE__*/_jsxDEV(Login, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/register\",\n          children: /*#__PURE__*/_jsxDEV(Register, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/\",\n          children: /*#__PURE__*/_jsxDEV(Dashboard, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/create\",\n          children: /*#__PURE__*/_jsxDEV(Create, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          exact: true,\n          path: \"/:id\",\n          children: /*#__PURE__*/_jsxDEV(FullNote, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 3\n  }, this);\n}\n\n_s(App, \"leb/pRMwBiUao3yyH1YL5RaUaGU=\", false, function () {\n  return [useHistory];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/GIRI PRASATH.V/Desktop/fullstack-notesapp/frontend/src/App.js"],"names":["useState","useEffect","BrowserRouter","Router","Route","Switch","useHistory","AuthContext","Create","Dashboard","FullNote","Login","Register","axios","App","username","setUsername","isLoggedIn","setIsLoggedIn","history","URL","process","env","REACT_APP_BACKEND_BASE_URL","options","withCredentials","Credential","headers","console","log","get","then","res","data","catch","error","response","window","location","href","endsWith"],"mappings":"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","sourcesContent":["import { useState, useEffect } from 'react';\r\nimport {\r\n\tBrowserRouter,\r\n\tBrowserRouter as Router,\r\n\tRoute,\r\n\tSwitch,\r\n\tuseHistory,\r\n} from 'react-router-dom';\r\nimport { AuthContext } from './context/AuthContext';\r\nimport Create from './components/Create';\r\nimport Dashboard from './components/Dashboard';\r\nimport FullNote from './components/FullNote';\r\nimport Login from './components/Login';\r\nimport Register from './components/Register';\r\n\r\nimport axios from 'axios';\r\n\r\nfunction App() {\r\n\tconst [username, setUsername] = useState('');\r\n\tconst [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\tconst history = useHistory();\r\n\r\n\tuseEffect(() => {\r\n\t\tconst URL = `${process.env.REACT_APP_BACKEND_BASE_URL}/users/is-logged`;\r\n\t\tconst options = {\r\n\t\t\twithCredentials: true,\r\n\t\t\tCredential: 'include',\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'application/json',\r\n\t\t\t},\r\n\t\t};\r\n\t\tconsole.log('in APP');\r\n\t\taxios\r\n\t\t\t.get(URL, options)\r\n\t\t\t.then((res) => {\r\n\t\t\t\t// console.log(res.data.username);\r\n\t\t\t\tsetUsername(res.data.username);\r\n\t\t\t\tsetIsLoggedIn(true);\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tconsole.log(error.response.data);\r\n\t\t\t\tif (window.location.href.endsWith('/register')) return;\r\n\t\t\t\telse if (!window.location.href.endsWith('/login'))\r\n\t\t\t\t\twindow.location.href = '/login';\r\n\r\n\t\t\t\tsetIsLoggedIn(false);\r\n\t\t\t});\r\n\t}, []);\r\n\r\n\tconsole.log(username, isLoggedIn);\r\n\r\n\treturn (\r\n\t\t<AuthContext.Provider value={{ username, isLoggedIn, setIsLoggedIn }}>\r\n\t\t\t<Router>\r\n\t\t\t\t<Switch>\r\n\t\t\t\t\t{/* Auth Routes */}\r\n\t\t\t\t\t<Route exact path=\"/login\">\r\n\t\t\t\t\t\t<Login />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route exact path=\"/register\">\r\n\t\t\t\t\t\t<Register />\r\n\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t{/* protected Routes */}\r\n\t\t\t\t\t<Route exact path=\"/\">\r\n\t\t\t\t\t\t<Dashboard />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route exact path=\"/create\">\r\n\t\t\t\t\t\t<Create />\r\n\t\t\t\t\t</Route>\r\n\t\t\t\t\t<Route exact path=\"/:id\">\r\n\t\t\t\t\t\t<FullNote />\r\n\t\t\t\t\t</Route>\r\n\r\n\t\t\t\t\t{/* 404 Route */}\r\n\t\t\t\t\t{/* <Route exact path=\"*\"></Route> */}\r\n\t\t\t\t</Switch>\r\n\t\t\t</Router>\r\n\t\t</AuthContext.Provider>\r\n\t);\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}